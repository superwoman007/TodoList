# TodoList 项目说明文档

## 项目规划
- 目标：完成 Web 前端在手机端的适配与美化，确保体验舒适、易用，并具备基础 PWA 能力。
- 范围：
  - 移动端导航与视图切换优化（单列视图、分段控件）
  - 触控可用性提升（≥44px 触达、清晰反馈）
  - 无障碍与可达性完善（focus-visible、ARIA 状态）
  - 动效降级支持（prefers-reduced-motion）
  - PWA 安装体验补全（manifest、service worker、图标）
- 技术栈：HTML + Tailwind CDN + 原生 JS；不引入构建链与额外框架。

## 实施方案
- 设计系统
  - 品牌色：indigo/fuchsia；状态色：emerald/amber/red/sky
  - 字体层级：移动优先（text-2xl 至 text-xs），正文 text-sm/base
  - 间距与阴影：p-3/p-4，shadow-sm/md/lg；边框 gray-200 / dark slate-700
- 前端实现
  - 在 apps/web/index.html 中新增移动端分段控件，默认显示单列；桌面保持三列并行
  - 调整交互控件最小触达尺寸为 ≥44px，优化移动端 FAB 的位置，避免遮挡内容
  - 统一使用 focus-visible 与 aria-selected/tabindex，增强键盘可达性
  - 在 head 注入 prefers-reduced-motion 降级样式；对按钮与卡片增加 motion-reduce 类
  - 页面级防横向滚动：overflow-x-hidden overscroll-x-none；移除负外边距
  - 预留底部导航实现与 PWA 安装引导（后续补充 manifest 与图标）

## 进度记录
- 2026-02-15
  - 已完成：前端技术栈审查（apps/web：HTML+Tailwind+JS，具响应式与PWA基础）
  - 已完成：新增移动端顶部分段切换与视图隐藏，单列移动视图
  - 已完成：提升按钮触控尺寸至≥44px，调整 FAB 避免遮挡
  - 已完成：统一焦点样式为 focus-visible、增强 tabs 的 ARIA 语义与键盘可达性
  - 已完成：加入 prefers-reduced-motion 降级样式与 motion-reduce 类，降低动画
  - 已完成：移除可能的横向溢出，增加页面级 overflow-x-hidden
  - 已完成：PWA 资源修复（manifest.json, sw.js 路径修正及图标补充）
  - 已完成：交互模式重构（从拖拽改为点击触发模态弹窗），统一移动端与桌面端体验
  - 已完成：新增状态变更撤销功能（Undo Toast）
  - 已完成：新增操作加载状态反馈（Loading Spinner）
  - 已完成：新增任务编辑功能（复用添加模态框）
  - 已完成：新增任务删除功能（带确认模态框）
  - 已完成：撤销功能支持删除与编辑操作
- 2026-02-16
  - 已完成：修复编辑功能（将不存在的 openEditModal 改为 openModal）
  - 已完成：修复删除功能（添加 showUndoToast 消息参数）
  - 已完成：修复模态框标题获取方式（从 add-form 改为 overlay）
  - 已完成：修复编辑/删除未生效（避免关闭操作弹窗时清空目标任务ID）
  - 已完成：修复撤销对编辑操作的回滚逻辑
  - 已完成：修复 Service Worker 旧缓存导致脚本被当作文本渲染的问题
  - 已完成：完善 Service Worker 更新与激活流程（清理旧缓存、即时接管、导航网络优先）
  - 已完成：更新 Service Worker 版本至 v7
  - 已完成：配置 Capacitor 打包环境（初始化项目、添加 Android 平台、安装依赖）
  - 已完成：同步 Web 资源到 Android 项目
  - 已完成：安装 Java JDK 17（通过 Homebrew）
  - 已完成：创建 APK 构建说明文档（推荐使用 PWA Builder 在线构建）
  - 待完成：使用 PWA Builder 或配置 Android SDK 后本地构建 APK


## 验证方式
- 本地预览地址：http://localhost:8002/apps/web/index.html
- 断点验证：375px/768px/1024px/1440px；检查移动端单列视图与分段切换
- 可用性检查：触控尺寸、焦点可见、无横向滚动、动画降级生效
